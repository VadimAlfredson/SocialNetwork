"use strict";(self.webpackChunkreact_vadim=self.webpackChunkreact_vadim||[]).push([[92],{9092:function(e,n,s){s.r(n),s.d(n,{default:function(){return V}});var r=s(2791),t=s(885),a=s(9662),u="users_usersComponent__8nRZo",c="users_itemUser__x5owb",i="users_avatar__erVMZ",o="users_infoUser__y2HtR",l="users_followButton__ExoVv",h="users_massageButton__-K1Un",d="users_buttonStyle__jG05x",f="users_nameUser__9hBV1",_="users_statusUser__F2WyE",m="users_navLinkToLogin__wH+jC",p="users_formSearchBlock__2WRRL",x="users_searchInput__2r7sY",C="users_searchButton__ZGCpm",g="users_searchCheckbox__LqUAR",j="users_searchText__DnfT0",v=s(3504),b=s(6871),N="paginator_activePage__eWc4N",k="paginator_paginator__QVHI9",G="paginator_pageNumber__7A1XW",y=s(8755),S=s(184),w=function(e){for(var n=(0,y.CG)((function(e){return e.users.pageSize})),s=(0,y.CG)((function(e){return e.users.totalUsersCount})),a=(0,y.CG)((function(e){return e.users.currentPage})),u=(0,y.CG)((function(e){return e.users.term})),c=(0,y.CG)((function(e){return e.users.friends})),i=Math.ceil(s/n),o=[],l=1;l<=i;l++)o.push(l);var h=Math.ceil(i/5),d=(0,r.useState)(1),f=(0,t.Z)(d,2),_=f[0],m=f[1],p=5*(_-1)+1,x=5*_;return(0,S.jsxs)("div",{className:k,children:[_>1&&o.filter((function(e){return 1===e})).map((function(s){return(0,S.jsx)("span",{className:a===s?N:G,onClick:function(){e.onPageChange(s,n,u)},children:s},s)})),_>1&&(0,S.jsx)("button",{className:G,onClick:function(){m(_-1)},children:"<<"}),o.filter((function(e){return e>=p&&e<=x})).map((function(s){return(0,S.jsx)("span",{className:a===s?N:G,onClick:function(){c?e.onPageChange(s,n,u,c):e.onPageChange(s,n,u)},children:s},s)})),h>_&&(0,S.jsx)("button",{className:G,onClick:function(){m(_+1)},children:">>"}),h>_&&o.filter((function(e){return e===i})).map((function(s){return(0,S.jsx)("span",{className:a===s?N:G,onClick:function(){e.onPageChange(s,n,u)},children:s},s)}))]})},U=s(4374),B=s(443),P=s(5705),Z=s(132),L=function(e){var n=(0,y.CG)((function(e){return e.users.pageSize})),s=Z.Ry().shape({search:Z.Z_()});return(0,S.jsx)(P.J9,{initialValues:{search:"",subscriptionsCheckbox:!1},validateOnBlur:!0,onSubmit:function(s){console.log(s),e.onUsersChange(1,n,s.search,s.subscriptionsCheckbox)},validationSchema:s,children:function(e){var n=e.values,s=(e.errors,e.touched,e.handleBlur),r=e.handleChange,t=(e.isValid,e.handleSubmit);e.dirty;return(0,S.jsxs)("div",{className:p,children:[(0,S.jsx)("input",{className:x,type:"text",name:"search",onChange:r,onBlur:s,value:n.search,placeholder:"text"}),(0,S.jsx)("button",{className:C,onClick:function(){t()},type:"submit",children:"Search"}),(0,S.jsx)("div",{className:g,children:(0,S.jsx)("div",{className:"",children:(0,S.jsx)("input",{type:"checkbox",name:"subscriptionsCheckbox",onChange:r,onBlur:s})})}),(0,S.jsx)("div",{className:j,children:"Only subscriptions"})]})}})},R=function(e){var n=(0,y.CG)((function(e){return e.users.users})),s=(0,y.CG)((function(e){return e.users.followingInProgress})),p=(0,y.CG)((function(e){return e.auth.isAuth})),x=(0,y.CG)((function(e){return e.users.isFetching})),C=(0,y.CG)((function(e){return e.users.term})),g=(0,y.CG)((function(e){return e.users.friends})),j=(0,r.useState)(1),N=(0,t.Z)(j,2),k=N[0],G=N[1],P=(0,r.useState)(!1),Z=(0,t.Z)(P,2),R=Z[0],V=Z[1],E=(0,b.s0)(),T=(0,y.TL)(),F=function(e,n,s,r){T((0,a.IV)(e,n,s,r)),G(e)};return(0,r.useEffect)((function(){E({pathname:"/users",search:C||g||k?"?"+(k?"pageNumber=".concat(k).concat(C?"&":""):"")+(C?"term=".concat(C).concat(g?"&":""):"")+(g?"friend=".concat(g):""):""})}),[C,g,k]),(0,r.useEffect)((function(){R!=p?V(p):console.log("useEffect")}),[p]),(0,S.jsxs)("div",{className:u,children:[(0,S.jsx)(w,{onPageChange:F}),(0,S.jsx)(L,{onUsersChange:F}),x?(0,S.jsx)(U.Z,{}):(0,S.jsx)("div",{children:n.map((function(e){return(0,S.jsxs)("div",{className:c,children:[(0,S.jsx)("div",{className:i,children:(0,S.jsx)(v.OL,{to:"/profile/"+e.id,children:(0,S.jsx)("img",{src:null!==e.photos.small?e.photos.small:"https://shapka-youtube.ru/wp-content/uploads/2021/02/avatarka-dlya-skaypa-dlya-parney.jpg",alt:"\u043a\u0430\u0440\u0442\u0438\u043d\u043a\u0430"})})}),(0,S.jsx)("div",{className:l,children:p?(0,S.jsx)("button",{className:d,disabled:s.includes(e.id),onClick:function(){return n=e.id,s=e.followed,void T((0,a.uq)(n,s));var n,s},children:e.followed?"Unfollow":"Follow"}):(0,S.jsx)(v.OL,{className:m,to:"../login",children:"Register to subscribe"})}),(0,S.jsx)("div",{className:h,children:p&&(0,S.jsx)("button",{className:d,onClick:function(){var n;n=e.id,T((0,B.yZ)(n))},children:"Message"})}),(0,S.jsxs)("div",{className:o,children:[(0,S.jsx)("div",{className:f,children:e.name}),(0,S.jsx)("div",{className:_,children:e.status})]})]},e.id)}))})]})},V=function(e){var n=(0,y.TL)(),s=(0,y.CG)((function(e){return e.users.pageSize})),t=(0,y.CG)((function(e){return e.users.currentPage}));return(0,r.useEffect)((function(){n((0,a.Uk)(t,s))}),[]),(0,S.jsx)(S.Fragment,{children:(0,S.jsx)(R,{})})}}}]);
//# sourceMappingURL=92.8e7cd71b.chunk.js.map