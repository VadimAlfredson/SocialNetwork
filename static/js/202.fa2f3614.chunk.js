"use strict";(self.webpackChunkreact_vadim=self.webpackChunkreact_vadim||[]).push([[202],{202:function(e,s,a){a.r(s),a.d(s,{default:function(){return N}});var n=a(885),i=a(2791),o={dialogs:"Dialogs_dialogs__GBcEp",dialogsUsers:"Dialogs_dialogsUsers__LBmt6",dialogDiv:"Dialogs_dialogDiv__uycfj",dialogItem:"Dialogs_dialogItem__k9CuM",getMoreDialogs:"Dialogs_getMoreDialogs__n6h0D",addDialog:"Dialogs_addDialog__OC9fh",active:"Dialogs_active__zK1A-",titleMessages:"Dialogs_titleMessages__2oe-t",messages:"Dialogs_messages__Ly6dr",addMessage:"Dialogs_addMessage__+SI4K",inputAddMessage:"Dialogs_inputAddMessage__KTTQa",buttonAddMessage:"Dialogs_buttonAddMessage__gnvoU",divAddMessage:"Dialogs_divAddMessage__EcDqL",iconMessage:"Dialogs_iconMessage__L+5-e",message:"Dialogs_message__pyaWz",divMessage:"Dialogs_divMessage__lpG8t",messageForm:"Dialogs_messageForm__5uYWH",divOwnerMessage:"Dialogs_divOwnerMessage__vv-7J",ownerMessageForm:"Dialogs_ownerMessageForm__zHNC0",textMessage:"Dialogs_textMessage__rleMB",ownerTextMessage:"Dialogs_ownerTextMessage__Sdmym",h3text:"Dialogs_h3text__5icbU",ownerMessageViewed:"Dialogs_ownerMessageViewed__boBPG",textMessageViewed:"Dialogs_textMessageViewed__i1cxU",deleteMessageOn:"Dialogs_deleteMessageOn__Uwr8k",deleteMessageOff:"Dialogs_deleteMessageOff__FcrKb",deleteMessageIcon:"Dialogs_deleteMessageIcon__unqLp",activeMessage:"Dialogs_activeMessage__ie+E3",warningDeleteMessage:"Dialogs_warningDeleteMessage__6S48Q",companionName:"Dialogs_companionName__AzAMZ"},t=a(3504),d=a(184),r=function(e){return(0,d.jsx)(t.OL,{to:"/dialogs/"+e.id,onClick:function(){e.onGetMessagesUser(e.id)},className:function(e){return e.isActive?o.active:o.dialogItem},children:e.name})},g=function(e){var s=(0,i.useState)(!1),a=(0,n.Z)(s,2),t=a[0],r=a[1],g=(0,i.useState)(!1),l=(0,n.Z)(g,2),c=l[0],u=l[1],_=e.message.replace(/&quot;/gi,'"').replace(/&#171;/gi,'"').replace(/&#187;/gi,'"').replace(/&#39;/gi,"'");console.log(e.senderId);var m=e.senderId===e.OwnerId?e.ownerPhoto||e.defaultPhoto:e.companionIcon;return(0,d.jsx)("div",{className:t||c?o.activeMessage:o.none,children:(0,d.jsxs)("div",{className:e.senderId===e.OwnerId?o.divOwnerMessage:o.divMessage,onClick:function(){r(!!c||function(e){return!e})},children:[(0,d.jsx)("div",{children:(0,d.jsx)("img",{className:o.iconMessage,src:m})}),(0,d.jsx)("div",{className:e.senderId===e.OwnerId?o.ownerMessageForm:o.messageForm,children:(0,d.jsxs)("a",{className:e.senderId===e.OwnerId?e.viewed?o.ownerTextMessage:o.ownerMessageViewed:e.viewed?o.textMessage:o.textMessageViewed,children:[_,(0,d.jsx)("br",{}),(0,d.jsx)("div",{className:t&&!c?o.deleteMessageOn:o.deleteMessageOff,onClick:function(){r(!0),u((function(e){return!e}))},children:(0,d.jsx)("img",{className:o.deleteMessageIcon,src:"/SocialNetwork/free-icon-delete-6467128.png"})})]})}),(0,d.jsxs)("div",{className:c?o.warningDeleteMessage:o.deleteMessageOff,children:["Are you sure you want to delete the message?",(0,d.jsx)("br",{}),(0,d.jsx)("button",{onClick:function(){e.onDeleteMessageChange(e.messageId,e.senderId===e.OwnerId?e.recipientId:e.senderId),u(!1)},children:"Yes"}),(0,d.jsx)("button",{onClick:function(){u(!1)},children:"No"})]})]})})},l=a(5705),c=a(132),u=function(e){var s=c.Z_();return(0,d.jsx)(l.J9,{initialValues:{textMessage:""},validateOnBlur:!0,onSubmit:function(s,a){var n=a.resetForm;!function(s){e.onMessageSentChange(e.dialogId,s)}(s.textMessage),console.log(s.textMessage),n({values:void 0})},validationSchema:s,children:function(e){var s=e.values,a=e.handleBlur,n=e.handleChange,i=e.isValid,t=e.handleSubmit,r=e.dirty;return(0,d.jsxs)("div",{className:o.divAddMessage,children:[(0,d.jsx)("input",{className:o.inputAddMessage,type:"textarea",name:"textMessage",onChange:n,onBlur:a,value:s.textMessage,placeholder:"Add new message"}),(0,d.jsx)("br",{}),(0,d.jsx)("button",{className:o.buttonAddMessage,disabled:!i&&!r,onClick:function(){t()},type:"submit",children:"Send"})]})}})},_=function(e){return(0,d.jsx)(u,{dialogId:e.dialogId,onMessageSentChange:e.onMessageSentChange})},m=a(894),M=a(8755),h=function(e){return e.dialogs.dialogs},f=function(e){return e.dialogs.messages},v=function(e){return e.dialogs.dialogId},x=function(e){return e.dialogs.companionIcon},p=function(e){return e.dialogs.companionId},D=function(e){return e.dialogs.companionName},j=a(7368),w=function(){var e=(0,M.CG)(h),s=(0,M.CG)(f),a=(0,M.CG)(v),l=(0,M.CG)(j.nT),c=(0,M.CG)(j.Pg),u=(0,M.CG)(x),w=(0,M.CG)(D),I=(0,M.CG)(p),C=(0,M.CG)(j.XD),N=(0,i.useState)(10),O=(0,n.Z)(N,2),b=O[0],A=O[1],S=(0,M.TL)(),k=function(e,s){S((0,m.EF)(e,s))};(0,i.useEffect)((function(){S((0,m.kp)())}),[]);var G=function(s){S((0,m.rm)(s)),function(s){e.find((function(e){return e.id===s?S((0,m.s_)({photo:e.photos.large?e.photos.large:c,userName:e.userName,companionId:e.id})):console.log("sd")}))}(s)},y=(0,i.useState)([]),Z=(0,n.Z)(y,2),F=Z[0],L=Z[1];(0,i.useEffect)((function(){var s=[];if(e.length>0)for(var a=0;a<(e.length>b?b:e.length);a++)s.push(e[a]);L(s),console.log(s)}),[e,a,b]);var U=e[0]?F.map((function(e){return(0,d.jsx)(r,{name:e.userName,id:e.id,onGetMessagesUser:G},e.id)})):(0,d.jsx)(t.OL,{to:"/users",children:"Search friends"}),V=s[0]?s.map((function(e){return(0,d.jsx)(g,{message:e.body,senderId:e.senderId,OwnerId:l,companionIcon:u,ownerPhoto:C,viewed:e.viewed,onDeleteMessageChange:k,messageId:e.id,recipientId:e.recipientId,defaultPhoto:c},e.id)})):(0,d.jsx)("div",{children:(0,d.jsx)("h3",{className:o.h3text,children:"start chatting first"})});return(0,d.jsxs)("div",{className:o.dialogs,children:[(0,d.jsxs)("div",{children:[(0,d.jsx)(t.OL,{to:"/users",className:o.addDialog,children:"Add dialog"}),(0,d.jsx)("div",{className:o.dialogsUsers,children:U}),b<e.length&&(0,d.jsx)("div",{className:o.getMoreDialogs,onClick:function(){return A((function(e){return e+5}))},children:"Get more dialogs"})]}),(0,d.jsxs)("div",{className:o.messages,children:[(0,d.jsx)(t.OL,{to:"/profile/".concat(I),className:o.companionName,children:w}),(0,d.jsx)("div",{className:o.message,children:V}),(0,d.jsx)("div",{className:o.addMessage,children:(0,d.jsx)(_,{dialogId:a,onMessageSentChange:function(e,s){S((0,m.C7)(e,s))}})})]})]})},I=a(7781),C=a(3502),N=(0,I.qC)(C.S)(w)},3502:function(e,s,a){a.d(s,{S:function(){return _}});var n=a(8683),i=a(5671),o=a(3144),t=a(136),d=a(7277),r=a(2791),g=a(6434),l=a(6871),c=a(184),u=function(e){return{isAuth:e.auth.isAuth}},_=function(e){var s=function(s){(0,t.Z)(r,s);var a=(0,d.Z)(r);function r(){return(0,i.Z)(this,r),a.apply(this,arguments)}return(0,o.Z)(r,[{key:"render",value:function(){return this.props.isAuth?(0,c.jsx)(e,(0,n.Z)({},this.props)):(0,c.jsx)(l.Fg,{to:"/login"})}}]),r}(r.Component);return(0,g.$j)(u)(s)}}}]);
//# sourceMappingURL=202.fa2f3614.chunk.js.map