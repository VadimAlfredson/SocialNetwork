"use strict";(self.webpackChunkreact_vadim=self.webpackChunkreact_vadim||[]).push([[975],{5975:function(e,n,s){s.r(n),s.d(n,{default:function(){return q}});var a=s(2791),r=s(885),t=s(8159),c="users_usersComponent__8nRZo",i="users_itemUser__x5owb",o="users_avatar__erVMZ",u="users_infoUser__y2HtR",l="users_followButton__ExoVv",h="users_massageButton__-K1Un",d="users_buttonStyle__jG05x",f="users_nameUser__9hBV1",m="users_statusUser__F2WyE",_="users_navLinkToLogin__wH+jC",g="users_formSearchBlock__2WRRL",p="users_searchInput__2r7sY",C="users_searchButton__ZGCpm",x="users_searchCheckbox__LqUAR",j="users_searchText__DnfT0",v=s(3504),b=s(6871),N="paginator_activePage__eWc4N",k="paginator_paginator__QVHI9",G="paginator_pageNumber__7A1XW",y=s(8755),P=function(e){return e.users.users},w=function(e){return e.users.pageSize},U=function(e){return e.users.totalUsersCount},S=function(e){return e.users.currentPage},B=function(e){return e.users.isFetching},Z=function(e){return e.users.followingInProgress},L=function(e){return e.users.term},R=function(e){return e.users.friends},V=s(184),E=function(e){for(var n=(0,y.CG)(w),s=(0,y.CG)(U),t=(0,y.CG)(S),c=(0,y.CG)(L),i=(0,y.CG)(R),o=(0,a.useState)(1),u=(0,r.Z)(o,2),l=u[0],h=u[1],d=l>2?l-2:l>1?l-1:1,f=Math.ceil(s/n),m=[],_=d;_<=f;_++)m.push(_);return(0,a.useEffect)((function(){l!=t&&h(t||1)}),[t]),(0,V.jsxs)("div",{className:k,children:[l>3&&(0,V.jsx)("span",{className:1===t?N:G,onClick:function(){e.onPageChange(1,n,c),h(1)},children:1},1),l>4&&(0,V.jsx)("button",{className:G,onClick:function(){h((function(e){return e-1})),!0===i?e.onPageChange(l-1,n,c,i):e.onPageChange(l-1,n,c)},children:"<<"}),m.filter((function(e){return e>=d&&e<=l+2})).map((function(s){return(0,V.jsx)("span",{className:t===s?N:G,onClick:function(){!0===i?e.onPageChange(s,n,c,i):e.onPageChange(s,n,c),h(s)},children:s},s)})),l<f-2&&(0,V.jsx)("button",{className:G,onClick:function(){h((function(e){return e+1})),!0===i?e.onPageChange(l+1,n,c,i):e.onPageChange(l+1,n,c)},children:">>"}),l<f-2&&(0,V.jsx)("span",{className:t===f?N:G,onClick:function(){e.onPageChange(f,n,c),h(f)},children:f},f)]})},I=s(4374),O=s(894),T=s(5705),F=s(132),H=function(e){var n=(0,y.CG)((function(e){return e.users.pageSize})),s=F.Ry().shape({search:F.Z_()});return(0,V.jsx)(T.J9,{initialValues:{search:"",subscriptionsCheckbox:!1},validateOnBlur:!0,onSubmit:function(s){console.log(s),e.onUsersChange(1,n,s.search,s.subscriptionsCheckbox)},validationSchema:s,children:function(e){var n=e.values,s=(e.errors,e.touched,e.handleBlur),a=e.handleChange,r=(e.isValid,e.handleSubmit);e.dirty;return(0,V.jsxs)("div",{className:g,children:[(0,V.jsx)("input",{className:p,type:"text",name:"search",onChange:a,onBlur:s,value:n.search,placeholder:"text"}),(0,V.jsx)("button",{className:C,onClick:function(){r()},type:"submit",children:"Search"}),(0,V.jsx)("div",{className:x,children:(0,V.jsx)("div",{className:"",children:(0,V.jsx)("input",{type:"checkbox",name:"subscriptionsCheckbox",onChange:a,onBlur:s,value:"".concat(n.subscriptionsCheckbox)})})}),(0,V.jsx)("div",{className:j,children:"Only subscriptions"})]})}})},W=s(7368),M=function(e){var n=(0,y.CG)(P),s=(0,y.CG)(Z),g=(0,y.CG)(W.Kj),p=(0,y.CG)(B),C=(0,y.CG)(L),x=(0,y.CG)(R),j=(0,y.CG)(w),N=(0,y.CG)(S),k=(0,a.useState)(N),G=(0,r.Z)(k,2),U=G[0],T=(G[1],(0,b.s0)()),F=(0,y.TL)(),M=(0,b.TH)(),q=function(e,n,s,a){T({pathname:"/users",search:s||a||e?"?"+(e?"pageNumber=".concat(e).concat(s||a?"&":""):"")+(s?"term=".concat(s).concat(a?"&":""):"")+(!0===a?"friend=".concat(a):""):""}),N==e&&C==s&&x==!!a||F((0,t.IV)(e,n,C||"",a))};return(0,a.useEffect)((function(){var e=M.search.substring(1).split("&").reduce((function(e,n){var s=n.split("="),a=(0,r.Z)(s,2),t=a[0],c=a[1];return e[t]=c?decodeURIComponent(c.replace(/\+/g,"")):"",e}),{}),n="true"===e.friend||void 0;U==+e.pageNumber&&C==(e.term?e.term:"")&&x==n||q(+e.pageNumber,j,e.term||"",n)}),[M.search]),(0,a.useEffect)((function(){T({pathname:"/users",search:C||x||U?"?"+(U?"pageNumber=".concat(U).concat(C||x?"&":""):"")+(C?"term=".concat(C).concat(x?"&":""):"")+(!0===x?"friend=".concat(x):""):""})}),[C,x,U]),(0,V.jsxs)("div",{className:c,children:[(0,V.jsx)(E,{onPageChange:q}),(0,V.jsx)(H,{onUsersChange:q}),p?(0,V.jsx)(I.Z,{}):(0,V.jsx)("div",{children:n.map((function(e){return(0,V.jsxs)("div",{className:i,children:[(0,V.jsx)("div",{className:o,children:(0,V.jsx)(v.OL,{to:"/profile/"+e.id,children:(0,V.jsx)("img",{src:null!==e.photos.small?e.photos.small:"https://shapka-youtube.ru/wp-content/uploads/2021/02/avatarka-dlya-skaypa-dlya-parney.jpg",alt:"\u043a\u0430\u0440\u0442\u0438\u043d\u043a\u0430"})})}),(0,V.jsx)("div",{className:l,children:g?(0,V.jsx)("button",{className:d,disabled:s.includes(e.id),onClick:function(){return n=e.id,s=e.followed,void F((0,t.uq)(n,s));var n,s},children:e.followed?"Unfollow":"Follow"}):(0,V.jsx)(v.OL,{className:_,to:"../login",children:"Register to subscribe"})}),(0,V.jsx)("div",{className:h,children:g&&(0,V.jsx)(v.OL,{to:"/dialogs/".concat(e.id),children:(0,V.jsx)("button",{className:d,onClick:function(){var n;n=e.id,F((0,O.yZ)(n))},children:"Message"})})}),(0,V.jsxs)("div",{className:u,children:[(0,V.jsx)("div",{className:f,children:e.name}),(0,V.jsx)("div",{className:m,children:e.status})]})]},e.id)}))})]})},q=function(e){return(0,V.jsx)(V.Fragment,{children:(0,V.jsx)(M,{})})}}}]);
//# sourceMappingURL=975.6c40b3ff.chunk.js.map