"use strict";(self.webpackChunkreact_vadim=self.webpackChunkreact_vadim||[]).push([[708],{708:function(t,n,e){e.r(n),e.d(n,{default:function(){return y}});var r=e(2982),o=e(885),u=e(2791),c="Chat_messagesChat__CR-eP",i="Chat_messageBlock__vaJuA",a="Chat_avatar__rsPnT",s="Chat_message__F0bjS",f="Chat_name__TA+p3",l=e(3502),d=e(8755),p=e(1622),h=e(184),v=new WebSocket("wss://social-network.samuraijs.com/handlers/ChatHandler.ashx"),y=(0,l.S)((function(){return(0,h.jsxs)("div",{children:[(0,h.jsx)(b,{}),(0,h.jsx)(m,{})]})})),b=function(t){var n=(0,d.CG)((function(t){return t.chat.messages})),e=(0,u.useState)(n),i=(0,o.Z)(e,2),a=i[0],s=i[1],f=(0,d.TL)();return(0,u.useEffect)((function(){v.addEventListener("message",(function(t){var n=JSON.parse(t.data);s((function(t){return[].concat((0,r.Z)(t),(0,r.Z)(n))})),f((0,p.t)(n))})),console.log(a)}),[a]),(0,h.jsx)("div",{className:c,children:a.map((function(t,n){return(0,h.jsx)(j,{icon:t.photo,message:t.message,name:t.userName},n)}))})},j=function(t){return(0,h.jsxs)("div",{className:i,children:[(0,h.jsx)("img",{className:a,src:t.icon?t.icon:"https://shapka-youtube.ru/wp-content/uploads/2021/02/avatarka-dlya-skaypa-dlya-parney.jpg"}),(0,h.jsx)("div",{className:f,children:t.name}),(0,h.jsx)("div",{className:s,children:t.message})]})},m=function(){var t=(0,u.useState)(""),n=(0,o.Z)(t,2),e=n[0],r=n[1];return(0,h.jsxs)("div",{children:[(0,h.jsx)("div",{children:(0,h.jsx)("textarea",{onChange:function(t){return r(t.target.value)},value:e})}),(0,h.jsx)("div",{children:(0,h.jsx)("button",{onClick:function(){e&&(v.send(e),r(""))},disabled:v.readyState!==v.OPEN,children:"Send"})})]})}},3502:function(t,n,e){e.d(n,{S:function(){return p}});var r=e(8683),o=e(5671),u=e(3144),c=e(136),i=e(7277),a=e(2791),s=e(6434),f=e(6871),l=e(184),d=function(t){return{isAuth:t.auth.isAuth}},p=function(t){var n=function(n){(0,c.Z)(a,n);var e=(0,i.Z)(a);function a(){return(0,o.Z)(this,a),e.apply(this,arguments)}return(0,u.Z)(a,[{key:"render",value:function(){return this.props.isAuth?(0,l.jsx)(t,(0,r.Z)({},this.props)):(0,l.jsx)(f.Fg,{to:"/login"})}}]),a}(a.Component);return(0,s.$j)(d)(n)}},7326:function(t,n,e){function r(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}e.d(n,{Z:function(){return r}})},5671:function(t,n,e){function r(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}e.d(n,{Z:function(){return r}})},3144:function(t,n,e){function r(t,n){for(var e=0;e<n.length;e++){var r=n[e];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function o(t,n,e){return n&&r(t.prototype,n),e&&r(t,e),Object.defineProperty(t,"prototype",{writable:!1}),t}e.d(n,{Z:function(){return o}})},7277:function(t,n,e){e.d(n,{Z:function(){return a}});var r=e(1120),o=e(8814),u=e(1002),c=e(7326);function i(t,n){if(n&&("object"===(0,u.Z)(n)||"function"===typeof n))return n;if(void 0!==n)throw new TypeError("Derived constructors may only return object or undefined");return(0,c.Z)(t)}function a(t){var n=(0,o.Z)();return function(){var e,o=(0,r.Z)(t);if(n){var u=(0,r.Z)(this).constructor;e=Reflect.construct(o,arguments,u)}else e=o.apply(this,arguments);return i(this,e)}}},1120:function(t,n,e){function r(t){return r=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},r(t)}e.d(n,{Z:function(){return r}})},136:function(t,n,e){e.d(n,{Z:function(){return o}});var r=e(9611);function o(t,n){if("function"!==typeof n&&null!==n)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(n&&n.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),n&&(0,r.Z)(t,n)}},8814:function(t,n,e){function r(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}e.d(n,{Z:function(){return r}})},9611:function(t,n,e){function r(t,n){return r=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,n){return t.__proto__=n,t},r(t,n)}e.d(n,{Z:function(){return r}})}}]);
//# sourceMappingURL=708.1976b499.chunk.js.map