"use strict";(self.webpackChunkreact_vadim=self.webpackChunkreact_vadim||[]).push([[92],{9092:function(e,s,n){n.r(s),n.d(s,{default:function(){return L}});var r=n(5671),t=n(3144),a=n(136),o=n(7277),i=n(2791),l=n(6434),u=n(885),c="users_usersComponent__8nRZo",h="users_itemUser__x5owb",g="users_avatar__erVMZ",p="users_infoUser__y2HtR",d="users_followButton__ExoVv",C="users_massageButton__-K1Un",_="users_buttonStyle__jG05x",f="users_nameUser__9hBV1",m="users_statusUser__F2WyE",x="users_navLinkToLogin__wH+jC",v="users_formSearchBlock__2WRRL",j="users_searchInput__2r7sY",U="users_searchButton__ZGCpm",k="users_searchCheckbox__LqUAR",b="users_searchText__DnfT0",w=n(3504),N="paginator_activePage__eWc4N",y="paginator_paginator__QVHI9",S="paginator_pageNumber__7A1XW",F=n(184),P=function(e){for(var s=Math.ceil(e.totalUsersCount/e.pageSize),n=[],r=1;r<=s;r++)n.push(r);var t=Math.ceil(s/10),a=(0,i.useState)(1),o=(0,u.Z)(a,2),l=o[0],c=o[1],h=10*(l-1)+1,g=10*l;return(0,F.jsxs)("div",{className:y,children:[l>1&&(0,F.jsx)("button",{className:S,onClick:function(){c(l-1)},children:"left"}),n.filter((function(e){return e>=h&&e<=g})).map((function(s){return(0,F.jsx)("span",{className:e.currentPage===s?N:S,onClick:function(){e.onPageChange(s,e.pageSize,e.term,e.friend)},children:s},s)})),t>l&&(0,F.jsx)("button",{className:S,onClick:function(){c(l+1)},children:"right"})]})},Z=n(4374),z=n(5705),T=n(132),A=function(e){var s=T.Ry().shape({search:T.Z_()});return(0,F.jsx)(z.J9,{initialValues:{search:"",subscriptionsCheckbox:!1},validateOnBlur:!0,onSubmit:function(s){console.log(s),e.onUsersChange(1,e.pageSize,s.search,s.subscriptionsCheckbox)},validationSchema:s,children:function(e){var s=e.values,n=(e.errors,e.touched,e.handleBlur),r=e.handleChange,t=(e.isValid,e.handleSubmit);e.dirty;return(0,F.jsxs)("div",{className:v,children:[(0,F.jsx)("input",{className:j,type:"text",name:"search",onChange:r,onBlur:n,value:s.search,placeholder:"text"}),(0,F.jsx)("button",{className:U,onClick:function(){t()},type:"submit",children:"Search"}),(0,F.jsx)("div",{className:k,children:(0,F.jsx)("div",{className:"",children:(0,F.jsx)("input",{type:"checkbox",name:"subscriptionsCheckbox",onChange:r,onBlur:n})})}),(0,F.jsx)("div",{className:b,children:"Only subscriptions"})]})}})},B=function(e){var s=(0,i.useState)(!1),n=(0,u.Z)(s,2),r=n[0],t=n[1];return(0,i.useEffect)((function(){r!=e.isAuth?t(e.isAuth):console.log("useEffect")}),[e.isAuth]),(0,F.jsxs)("div",{className:c,children:[(0,F.jsx)(P,{totalUsersCount:e.totalUsersCount,pageSize:e.pageSize,currentPage:e.currentPage,onPageChange:e.onUsersChange,term:e.term,friend:e.friend}),(0,F.jsx)(A,{onUsersChange:e.onUsersChange,pageSize:e.pageSize}),e.isFetching?(0,F.jsx)(Z.Z,{}):(0,F.jsx)("div",{children:e.users.map((function(s){return(0,F.jsxs)("div",{className:h,children:[(0,F.jsx)("div",{className:g,children:(0,F.jsx)(w.OL,{to:"/profile/"+s.id,children:(0,F.jsx)("img",{src:null!==s.photos.small?s.photos.small:"https://shapka-youtube.ru/wp-content/uploads/2021/02/avatarka-dlya-skaypa-dlya-parney.jpg",alt:"\u043a\u0430\u0440\u0442\u0438\u043d\u043a\u0430"})})}),(0,F.jsx)("div",{className:d,children:e.isAuth?(0,F.jsx)("button",{className:_,disabled:e.followingInProgress.includes(s.id),onClick:function(){return e.onFollowChange(s.id,s.followed)},children:s.followed?"Unfollow":"Follow"}):(0,F.jsx)(w.OL,{className:x,to:"../login",children:"Register to subscribe"})}),(0,F.jsx)("div",{className:C,children:e.isAuth&&(0,F.jsx)("button",{className:_,onClick:function(){e.onDialogUserChange(s.id)},children:"Message"})}),(0,F.jsxs)("div",{className:p,children:[(0,F.jsx)("div",{className:f,children:s.name}),(0,F.jsx)("div",{className:m,children:s.status})]})]},s.id)}))})]})},D=n(9662),I=n(7781),R=n(2931),M=n(443),V=function(e){(0,a.Z)(n,e);var s=(0,o.Z)(n);function n(){var e;(0,r.Z)(this,n);for(var t=arguments.length,a=new Array(t),o=0;o<t;o++)a[o]=arguments[o];return(e=s.call.apply(s,[this].concat(a))).onUsersChange=function(s,n,r,t){e.props.onChangeUsersThunkCreator(s,n,r,t)},e.onFollowChange=function(s,n){e.props.onFollowChangeThunkCreator(s,n)},e.onDialogUserChange=function(s){e.props.putDialogUserThunkCreator(s)},e}return(0,t.Z)(n,[{key:"componentDidMount",value:function(){this.props.getUsersThunkCreator(this.props.currentPage,this.props.pageSize)}},{key:"render",value:function(){return(0,F.jsx)(F.Fragment,{children:(0,F.jsx)(B,{isAuth:this.props.isAuth,isFetching:this.props.isFetching,users:this.props.users,pageSize:this.props.pageSize,currentPage:this.props.currentPage,totalUsersCount:this.props.totalUsersCount,onUsersChange:this.onUsersChange,onFollowChange:this.onFollowChange,followingInProgress:this.props.followingInProgress,onDialogUserChange:this.onDialogUserChange,term:this.props.term,friend:this.props.friends})})}}]),n}(i.Component),L=(0,I.qC)((0,l.$j)((function(e){return{users:(0,R.Rf)(e),pageSize:(0,R.b7)(e),totalUsersCount:(0,R.qZ)(e),currentPage:(0,R.FZ)(e),followingInProgress:(0,R.yg)(e),isAuth:(0,R.Od)(e),isFetching:(0,R.ab)(e),term:(0,R.cc)(e),friends:(0,R.$J)(e)}}),{followed:D.Gp,setUsers:D.HM,setCurrentPage:D.D4,setTotalUsersCount:D.K1,toggleIsFetching:D.MO,toggleIsFollowing:D.zF,getUsersThunkCreator:D.Uk,onChangeUsersThunkCreator:D.IV,onFollowChangeThunkCreator:D.uq,putDialogUserThunkCreator:M.yZ}))(V)}}]);
//# sourceMappingURL=92.0486c37d.chunk.js.map