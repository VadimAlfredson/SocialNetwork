"use strict";(self.webpackChunkreact_vadim=self.webpackChunkreact_vadim||[]).push([[650],{650:function(t,e,s){s.r(e),s.d(e,{default:function(){return U}});var r=s(5671),n=s(3144),o=s(136),a=s(7277),u=s(8683),i=s(2791),c=s(2005),l="Post_post__nQiOB",p="Post_img__JZc0-",d="Post_message__RccBK",h="Post_like__Cf8gT",f=s(184),v=function(t){return(0,f.jsxs)("div",{className:l,children:[(0,f.jsx)("img",{className:p,src:"https://shapka-youtube.ru/wp-content/uploads/2021/02/avatarka-dlya-skaypa-dlya-parney.jpg"}),(0,f.jsx)("div",{className:d,children:t.message}),(0,f.jsxs)("div",{className:h,children:[t.likeCount," like"]})]})},x={createText:"MyPosts_createText__xWvCB",buttonAddPost:"MyPosts_buttonAddPost__msy9U",addpost:"MyPosts_addpost__W58dj"},j=s(5705),P=i.memo((function(t){return console.log("rerenderPost"),(0,f.jsx)(j.J9,{initialValues:{newPost:""},validateOnBlur:!0,onSubmit:function(e,s){var r=s.resetForm;t.createNewPost(e.newPost),console.log(e.newPost),r({values:void 0})},children:function(t){var e=t.values,s=t.handleBlur,r=t.handleChange,n=t.isValid,o=t.handleSubmit,a=t.dirty;return(0,f.jsxs)("div",{children:[(0,f.jsx)("input",{type:"input",name:"newPost",onChange:r,placeholder:"Add text",className:x.createText,value:e.newPost,onBlur:s}),(0,f.jsx)("button",{className:x.buttonAddPost,disabled:!n&&!a,onClick:function(){o()},type:"submit",children:"Add post"})]})}})})),k=function(t){var e=t.posts.map((function(t){return(0,f.jsx)(v,{message:t.message,likeCount:t.likeCount},t.id)}));return console.log("Rerender"),(0,f.jsxs)("div",{children:[(0,f.jsx)(P,{createNewPost:t.createNewPost}),(0,f.jsx)("div",{className:x.post,children:e})]})},m=s(6434),C=(0,m.$j)((function(t){return{posts:t.profilePage.posts,newPostText:t.profilePage.newPostText}}),(function(t){return{createNewPost:function(e){t((0,c.HP)(e))}}}))(k),g=s(885),T="Profile_avatarImg__edtWN",y=s(4374),_=function(t){var e=(0,i.useState)(!1),s=(0,g.Z)(e,2),r=s[0],n=s[1],o=(0,i.useState)(t.status),a=(0,g.Z)(o,2),u=a[0],c=a[1];return(0,i.useEffect)((function(){c(t.status)}),[t.status]),(0,f.jsxs)("div",{children:["  ",!r&&(0,f.jsx)("div",{children:(0,f.jsx)("span",{onDoubleClick:function(){return n(!0)},children:t.status||"status"})}),r&&(0,f.jsx)("div",{children:(0,f.jsx)("input",{onChange:function(t){c(t.currentTarget.value)},autoFocus:!0,onBlur:function(){n(!1),t.putStatusThunkCreator(u)},value:u})})]})},w=function(t){var e=t.contactTitle,s=t.contactValue;return(0,f.jsxs)("div",{children:[(0,f.jsxs)("b",{children:[e,":"]})," ",s]})},Z=function(t){var e=t.profile,s=t.isOwner,r=(0,i.useState)(!1),n=(0,g.Z)(r,2),o=n[0],a=n[1];return(0,f.jsxs)("div",{children:[s||(0,f.jsx)("button",{onClick:function(){a(!o)},children:"edit contacts"}),!s&&o&&(0,f.jsx)("div",{children:"edit"}),(0,f.jsx)("div",{children:!s&&o||Object.keys(e.contacts).filter((function(t){return s?null!=e.contacts[t]:t})).map((function(t){return(0,f.jsx)(w,{contactTitle:t,contactValue:e.contacts[t]},t)}))})]})},S=function(t){if(!t.profile)return(0,f.jsx)(y.Z,{});return(0,f.jsxs)("div",{children:[(0,f.jsxs)("div",{children:[(0,f.jsx)("img",{className:T,src:t.profile.photos.large||"https://shapka-youtube.ru/wp-content/uploads/2021/02/avatarka-dlya-skaypa-dlya-parney.jpg"}),t.isOwner||(0,f.jsx)("input",{type:"file",onChange:function(e){e.target.files.length&&t.savePhotoTC(e.target.files[0])}})]}),(0,f.jsx)(_,{status:t.status,putStatusThunkCreator:t.putStatusThunkCreator}),(0,f.jsx)("div",{children:(0,f.jsx)(Z,{profile:t.profile,isOwner:t.isOwner})})]})},b=function(t){return(0,f.jsxs)("div",{children:[(0,f.jsx)(S,{savePhotoTC:t.savePhotoTC,isOwner:t.isOwner,profile:t.profile,putStatusThunkCreator:t.putStatusThunkCreator,status:t.status}),(0,f.jsx)(C,{})]})},N=s(6871),O=s(7781),A=s(3502),I=s(9662);var B=function(t){(0,o.Z)(s,t);var e=(0,a.Z)(s);function s(){return(0,r.Z)(this,s),e.apply(this,arguments)}return(0,n.Z)(s,[{key:"refreshProfile",value:function(){var t=this.props.router.params.userId;t||(t=this.props.authorizedUserId),this.props.userProfileThunkCreator(t),this.props.getStatusThunkCreator(t)}},{key:"componentDidMount",value:function(){this.refreshProfile()}},{key:"componentDidUpdate",value:function(t,e,s){this.props.router.params.userId!=t.router.params.userId&&this.refreshProfile()}},{key:"render",value:function(){return(0,f.jsx)(b,(0,u.Z)((0,u.Z)({},this.props),{},{isOwner:!!this.props.router.params.userId,profile:this.props.profile,status:this.props.status,putStatusThunkCreator:this.props.putStatusThunkCreator,savePhotoTC:this.props.savePhotoTC}))}}]),s}(i.Component),U=(0,O.qC)((function(t){return function(e){var s=(0,N.TH)(),r=(0,N.s0)(),n=(0,N.UO)();return(0,f.jsx)(t,(0,u.Z)((0,u.Z)({},e),{},{router:{location:s,navigate:r,params:n}}))}}),(0,m.$j)((function(t){return{profile:t.profilePage.profile,status:t.profilePage.status,authorizedUserId:t.auth.userId}}),{setUserProfile:c.$l,userProfileThunkCreator:c.Hw,getStatusThunkCreator:c.xD,putStatusThunkCreator:c.FY,savePhotoTC:c.Tw,onFollowChangeThunkCreator:I.uq}),A.S)(B)},3502:function(t,e,s){s.d(e,{S:function(){return h}});var r=s(8683),n=s(5671),o=s(3144),a=s(136),u=s(7277),i=s(2791),c=s(6434),l=s(6871),p=s(184),d=function(t){return{isAuth:t.auth.isAuth}},h=function(t){var e=function(e){(0,a.Z)(i,e);var s=(0,u.Z)(i);function i(){return(0,n.Z)(this,i),s.apply(this,arguments)}return(0,o.Z)(i,[{key:"render",value:function(){return this.props.isAuth?(0,p.jsx)(t,(0,r.Z)({},this.props)):(0,p.jsx)(l.Fg,{to:"/login"})}}]),i}(i.Component);return(0,c.$j)(d)(e)}}}]);
//# sourceMappingURL=650.9f0923bf.chunk.js.map