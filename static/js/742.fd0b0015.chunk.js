"use strict";(self.webpackChunkreact_vadim=self.webpackChunkreact_vadim||[]).push([[742],{4742:function(e,s,n){n.r(s),n.d(s,{default:function(){return Z}});var a=n(443),o=n(2791),i="Dialogs_dialogs__GBcEp",t="Dialogs_dialogsTitle__bxfTn",r="Dialogs_dialogsUsers__LBmt6",d="Dialogs_dialogItem__k9CuM",l="Dialogs_active__zK1A-",g="Dialogs_titleMessages__2oe-t",c="Dialogs_messages__Ly6dr",u="Dialogs_addMessage__+SI4K",h="Dialogs_inputAddMessage__KTTQa",_="Dialogs_buttonAddMessage__gnvoU",m="Dialogs_divAddMessage__EcDqL",I="Dialogs_iconMessage__L+5-e",f="Dialogs_message__pyaWz",v="Dialogs_divMessage__lpG8t",x="Dialogs_messageForm__5uYWH",p="Dialogs_divOwnerMessage__vv-7J",M="Dialogs_ownerMessageForm__zHNC0",j="Dialogs_textMessage__rleMB",C="Dialogs_ownerTextMessage__Sdmym",D="Dialogs_h3text__5icbU",w=n(3504),N=n(184),P=function(e){return(0,N.jsx)(w.OL,{to:"/dialogs/"+e.id,onClick:function(){e.onGetMessagesUser(e.id)},className:function(e){return e.isActive?l:d},children:e.name})},k=function(e){var s=e.senderId===e.OwnerId?e.ownerPhoto:e.companionIcon;return(0,N.jsxs)("div",{className:e.senderId===e.OwnerId?p:v,children:[(0,N.jsx)("div",{children:(0,N.jsx)("img",{className:I,src:s})}),(0,N.jsx)("div",{className:e.senderId===e.OwnerId?M:x,children:(0,N.jsx)("a",{className:e.senderId===e.OwnerId?C:j,children:e.message})})]})},A=n(5705),O=n(132),T=function(e){var s=O.Z_();return(0,N.jsx)(A.J9,{initialValues:{textMessage:""},validateOnBlur:!0,onSubmit:function(s,n){var a=n.resetForm;!function(s){e.onMessageSentChange(e.dialogId,s)}(s.textMessage),console.log(s.textMessage),a({values:void 0})},validationSchema:s,children:function(e){var s=e.values,n=e.handleBlur,a=e.handleChange,o=e.isValid,i=e.handleSubmit,t=e.dirty;return(0,N.jsxs)("div",{className:m,children:[(0,N.jsx)("input",{className:h,type:"textarea",name:"textMessage",onChange:a,onBlur:n,value:s.textMessage,placeholder:"Add new message"}),(0,N.jsx)("br",{}),(0,N.jsx)("button",{className:_,disabled:!o&&!t,onClick:function(){i()},type:"submit",children:"Sent"})]})}})},b=function(e){return(0,N.jsx)(T,{dialogId:e.dialogId,onMessageSentChange:e.onMessageSentChange})},S=function(e){(0,o.useEffect)((function(){e.getDialogsThunkCreator()}),[]);var s=function(s){e.getMessagesUserThunkCreator(s),function(s){e.dialogs.find((function(n){return n.id===s?e.setCompanionIconAC(n.photos.large?n.photos.large:e.defaultPhoto):e.setCompanionIconAC(e.defaultPhoto)}))}(s)},n=e.dialogs.map((function(e){return(0,N.jsx)(P,{name:e.userName,id:e.id,onGetMessagesUser:s},e.id)})),a=e.messages[0]?e.messages.map((function(s){return(0,N.jsx)(k,{dialogs:e.dialogs,message:s.body,dialogId:e.dialogId,senderIcon:e.senderIcon,senderId:s.senderId,OwnerId:e.OwnerId,OwnerIcon:e.OwnerIcon,companionIcon:e.companionIcon,ownerPhoto:e.ownerPhoto},s.id)})):(0,N.jsx)("div",{children:(0,N.jsx)("h3",{className:D,children:"start chatting first"})});return(0,N.jsxs)("div",{className:i,children:[(0,N.jsxs)("div",{className:r,children:[(0,N.jsx)("div",{className:t,children:"Dialogs"}),n]}),(0,N.jsxs)("div",{className:c,children:[(0,N.jsx)("div",{className:g,children:"Messages"}),(0,N.jsx)("div",{className:f,children:a}),(0,N.jsx)("div",{className:u,children:(0,N.jsx)(b,{dialogId:e.dialogId,onMessageSentChange:function(s,n){e.postMessageToUserThunkCreator(s,n)}})})]})]})},U=n(6434),y=n(7781),B=n(3502),Z=(0,y.qC)((0,U.$j)((function(e){return{dialogs:e.dialogsPage.dialogs,messages:e.dialogsPage.messages,isAuth:e.auth.isAuth,dialogId:e.dialogsPage.dialogId,senderIcon:e.dialogsPage.senderIcon,OwnerId:e.auth.userId,OwnerIcon:e.dialogsPage.OwnerIcon,companionId:e.dialogsPage.companionId,companionIcon:e.dialogsPage.companionIcon,defaultPhoto:e.dialogsPage.defaultPhoto,ownerPhoto:e.auth.ownerPhoto}}),{getDialogsThunkCreator:a.kp,getMessagesUserThunkCreator:a.rm,postMessageToUserThunkCreator:a.C7,setCompanionIconAC:a.Uh}),B.S)(S)},3502:function(e,s,n){n.d(s,{S:function(){return h}});var a=n(8683),o=n(5671),i=n(3144),t=n(136),r=n(7277),d=n(2791),l=n(6434),g=n(6871),c=n(184),u=function(e){return{isAuth:e.auth.isAuth}},h=function(e){var s=function(s){(0,t.Z)(d,s);var n=(0,r.Z)(d);function d(){return(0,o.Z)(this,d),n.apply(this,arguments)}return(0,i.Z)(d,[{key:"render",value:function(){return this.props.isAuth?(0,c.jsx)(e,(0,a.Z)({},this.props)):(0,c.jsx)(g.Fg,{to:"/login"})}}]),d}(d.Component);return(0,l.$j)(u)(s)}}}]);
//# sourceMappingURL=742.fd0b0015.chunk.js.map