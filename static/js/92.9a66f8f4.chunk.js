"use strict";(self.webpackChunkreact_vadim=self.webpackChunkreact_vadim||[]).push([[92],{9092:function(e,s,n){n.r(s),n.d(s,{default:function(){return L}});var r=n(5671),a=n(3144),t=n(136),o=n(7277),i=n(2791),l=n(6434),u=n(885),c="users_usersComponent__8nRZo",h="users_itemUser__x5owb",g="users_avatar__erVMZ",p="users_infoUser__y2HtR",d="users_followButton__ExoVv",f="users_massageButton__-K1Un",C="users_buttonStyle__jG05x",m="users_nameUser__9hBV1",_="users_statusUser__F2WyE",x="users_navLinkToLogin__wH+jC",j="users_formSearchBlock__2WRRL",v="users_searchInput__2r7sY",k="users_searchButton__ZGCpm",U="users_searchCheckbox__LqUAR",b="users_searchText__DnfT0",N=n(3504),w="paginator_activePage__eWc4N",S="paginator_paginator__QVHI9",y="paginator_pageNumber__7A1XW",P=n(184),F=function(e){for(var s=Math.ceil(e.totalUsersCount/e.pageSize),n=[],r=1;r<=s;r++)n.push(r);var a=Math.ceil(s/5),t=(0,i.useState)(1),o=(0,u.Z)(t,2),l=o[0],c=o[1],h=5*(l-1)+1,g=5*l;return(0,P.jsxs)("div",{className:S,children:[l>1&&n.filter((function(e){return 1===e})).map((function(s){return(0,P.jsx)("span",{className:e.currentPage===s?w:y,onClick:function(){e.onPageChange(s,e.pageSize,e.term)},children:s},s)})),l>1&&(0,P.jsx)("button",{className:y,onClick:function(){c(l-1)},children:"-5"}),n.filter((function(e){return e>=h&&e<=g})).map((function(s){return(0,P.jsx)("span",{className:e.currentPage===s?w:y,onClick:function(){e.friend?e.onPageChange(s,e.pageSize,e.term,e.friend):e.onPageChange(s,e.pageSize,e.term)},children:s},s)})),a>l&&(0,P.jsx)("button",{className:y,onClick:function(){c(l+1)},children:"+5"}),a>l&&n.filter((function(e){return e===s})).map((function(s){return(0,P.jsx)("span",{className:e.currentPage===s?w:y,onClick:function(){e.onPageChange(s,e.pageSize,e.term)},children:s},s)}))]})},z=n(4374),Z=n(5705),T=n(132),A=function(e){var s=T.Ry().shape({search:T.Z_()});return(0,P.jsx)(Z.J9,{initialValues:{search:"",subscriptionsCheckbox:!1},validateOnBlur:!0,onSubmit:function(s){console.log(s),e.onUsersChange(1,e.pageSize,s.search,s.subscriptionsCheckbox)},validationSchema:s,children:function(e){var s=e.values,n=(e.errors,e.touched,e.handleBlur),r=e.handleChange,a=(e.isValid,e.handleSubmit);e.dirty;return(0,P.jsxs)("div",{className:j,children:[(0,P.jsx)("input",{className:v,type:"text",name:"search",onChange:r,onBlur:n,value:s.search,placeholder:"text"}),(0,P.jsx)("button",{className:k,onClick:function(){a()},type:"submit",children:"Search"}),(0,P.jsx)("div",{className:U,children:(0,P.jsx)("div",{className:"",children:(0,P.jsx)("input",{type:"checkbox",name:"subscriptionsCheckbox",onChange:r,onBlur:n})})}),(0,P.jsx)("div",{className:b,children:"Only subscriptions"})]})}})},B=function(e){var s=(0,i.useState)(!1),n=(0,u.Z)(s,2),r=n[0],a=n[1];return(0,i.useEffect)((function(){r!=e.isAuth?a(e.isAuth):console.log("useEffect")}),[e.isAuth]),(0,P.jsxs)("div",{className:c,children:[(0,P.jsx)(F,{totalUsersCount:e.totalUsersCount,pageSize:e.pageSize,currentPage:e.currentPage,onPageChange:e.onUsersChange,term:e.term,friend:e.friend}),(0,P.jsx)(A,{onUsersChange:e.onUsersChange,pageSize:e.pageSize}),e.isFetching?(0,P.jsx)(z.Z,{}):(0,P.jsx)("div",{children:e.users.map((function(s){return(0,P.jsxs)("div",{className:h,children:[(0,P.jsx)("div",{className:g,children:(0,P.jsx)(N.OL,{to:"/profile/"+s.id,children:(0,P.jsx)("img",{src:null!==s.photos.small?s.photos.small:"https://shapka-youtube.ru/wp-content/uploads/2021/02/avatarka-dlya-skaypa-dlya-parney.jpg",alt:"\u043a\u0430\u0440\u0442\u0438\u043d\u043a\u0430"})})}),(0,P.jsx)("div",{className:d,children:e.isAuth?(0,P.jsx)("button",{className:C,disabled:e.followingInProgress.includes(s.id),onClick:function(){return e.onFollowChange(s.id,s.followed)},children:s.followed?"Unfollow":"Follow"}):(0,P.jsx)(N.OL,{className:x,to:"../login",children:"Register to subscribe"})}),(0,P.jsx)("div",{className:f,children:e.isAuth&&(0,P.jsx)("button",{className:C,onClick:function(){e.onDialogUserChange(s.id)},children:"Message"})}),(0,P.jsxs)("div",{className:p,children:[(0,P.jsx)("div",{className:m,children:s.name}),(0,P.jsx)("div",{className:_,children:s.status})]})]},s.id)}))})]})},D=n(9662),I=n(7781),R=n(2931),M=n(443),V=function(e){(0,t.Z)(n,e);var s=(0,o.Z)(n);function n(){var e;(0,r.Z)(this,n);for(var a=arguments.length,t=new Array(a),o=0;o<a;o++)t[o]=arguments[o];return(e=s.call.apply(s,[this].concat(t))).onUsersChange=function(s,n,r,a){e.props.onChangeUsersThunkCreator(s,n,r,a)},e.onFollowChange=function(s,n){e.props.onFollowChangeThunkCreator(s,n)},e.onDialogUserChange=function(s){e.props.putDialogUserThunkCreator(s)},e}return(0,a.Z)(n,[{key:"componentDidMount",value:function(){this.props.getUsersThunkCreator(this.props.currentPage,this.props.pageSize)}},{key:"render",value:function(){return(0,P.jsx)(P.Fragment,{children:(0,P.jsx)(B,{isAuth:this.props.isAuth,isFetching:this.props.isFetching,users:this.props.users,pageSize:this.props.pageSize,currentPage:this.props.currentPage,totalUsersCount:this.props.totalUsersCount,onUsersChange:this.onUsersChange,onFollowChange:this.onFollowChange,followingInProgress:this.props.followingInProgress,onDialogUserChange:this.onDialogUserChange,term:this.props.term,friend:this.props.friends})})}}]),n}(i.Component),L=(0,I.qC)((0,l.$j)((function(e){return{users:(0,R.Rf)(e),pageSize:(0,R.b7)(e),totalUsersCount:(0,R.qZ)(e),currentPage:(0,R.FZ)(e),followingInProgress:(0,R.yg)(e),isAuth:(0,R.Od)(e),isFetching:(0,R.ab)(e),term:(0,R.cc)(e),friends:(0,R.$J)(e)}}),{followed:D.Gp,setUsers:D.HM,setCurrentPage:D.D4,setTotalUsersCount:D.K1,toggleIsFetching:D.MO,toggleIsFollowing:D.zF,getUsersThunkCreator:D.Uk,onChangeUsersThunkCreator:D.IV,onFollowChangeThunkCreator:D.uq,putDialogUserThunkCreator:M.yZ}))(V)}}]);
//# sourceMappingURL=92.9a66f8f4.chunk.js.map