"use strict";(self.webpackChunkreact_vadim=self.webpackChunkreact_vadim||[]).push([[92],{9092:function(e,n,s){s.r(n),s.d(n,{default:function(){return V}});var r=s(2791),t=s(885),a=s(9662),c="users_usersComponent__8nRZo",u="users_itemUser__x5owb",i="users_avatar__erVMZ",o="users_infoUser__y2HtR",l="users_followButton__ExoVv",h="users_massageButton__-K1Un",d="users_buttonStyle__jG05x",f="users_nameUser__9hBV1",m="users_statusUser__F2WyE",_="users_navLinkToLogin__wH+jC",p="users_formSearchBlock__2WRRL",g="users_searchInput__2r7sY",x="users_searchButton__ZGCpm",C="users_searchCheckbox__LqUAR",v="users_searchText__DnfT0",j=s(3504),b=s(6871),N="paginator_activePage__eWc4N",k="paginator_paginator__QVHI9",G="paginator_pageNumber__7A1XW",y=s(8755),S=s(184),U=function(e){for(var n=(0,y.CG)((function(e){return e.users.pageSize})),s=(0,y.CG)((function(e){return e.users.totalUsersCount})),a=(0,y.CG)((function(e){return e.users.currentPage})),c=(0,y.CG)((function(e){return e.users.term})),u=(0,y.CG)((function(e){return e.users.friends})),i=Math.ceil(s/n),o=[],l=1;l<=i;l++)o.push(l);var h=Math.ceil(i/5),d=(0,r.useState)(1),f=(0,t.Z)(d,2),m=f[0],_=f[1],p=5*(m-1)+1,g=5*m;return(0,S.jsxs)("div",{className:k,children:[m>1&&o.filter((function(e){return 1===e})).map((function(s){return(0,S.jsx)("span",{className:a===s?N:G,onClick:function(){e.onPageChange(s,n,c)},children:s},s)})),m>1&&(0,S.jsx)("button",{className:G,onClick:function(){_(m-1)},children:"<<"}),o.filter((function(e){return e>=p&&e<=g})).map((function(s){return(0,S.jsx)("span",{className:a===s?N:G,onClick:function(){!0===u?e.onPageChange(s,n,c,u):e.onPageChange(s,n,c)},children:s},s)})),h>m&&(0,S.jsx)("button",{className:G,onClick:function(){_(m+1)},children:">>"}),h>m&&o.filter((function(e){return e===i})).map((function(s){return(0,S.jsx)("span",{className:a===s?N:G,onClick:function(){e.onPageChange(s,n,c)},children:s},s)}))]})},w=s(4374),B=s(443),L=s(5705),P=s(132),Z=function(e){var n=(0,y.CG)((function(e){return e.users.pageSize})),s=P.Ry().shape({search:P.Z_()});return(0,S.jsx)(L.J9,{initialValues:{search:"",subscriptionsCheckbox:!1},validateOnBlur:!0,onSubmit:function(s){console.log(s),e.onUsersChange(1,n,s.search,s.subscriptionsCheckbox)},validationSchema:s,children:function(e){var n=e.values,s=(e.errors,e.touched,e.handleBlur),r=e.handleChange,t=(e.isValid,e.handleSubmit);e.dirty;return(0,S.jsxs)("div",{className:p,children:[(0,S.jsx)("input",{className:g,type:"text",name:"search",onChange:r,onBlur:s,value:n.search,placeholder:"text"}),(0,S.jsx)("button",{className:x,onClick:function(){t()},type:"submit",children:"Search"}),(0,S.jsx)("div",{className:C,children:(0,S.jsx)("div",{className:"",children:(0,S.jsx)("input",{type:"checkbox",name:"subscriptionsCheckbox",onChange:r,onBlur:s,value:"".concat(n.subscriptionsCheckbox)})})}),(0,S.jsx)("div",{className:v,children:"Only subscriptions"})]})}})},R=function(e){var n=(0,y.CG)((function(e){return e.users.users})),s=(0,y.CG)((function(e){return e.users.followingInProgress})),p=(0,y.CG)((function(e){return e.auth.isAuth})),g=(0,y.CG)((function(e){return e.users.isFetching})),x=(0,y.CG)((function(e){return e.users.term})),C=(0,y.CG)((function(e){return e.users.friends})),v=(0,y.CG)((function(e){return e.users.pageSize})),N=(0,r.useState)(1),k=(0,t.Z)(N,2),G=k[0],L=(k[1],(0,b.s0)()),P=(0,y.TL)(),R=(0,b.TH)(),V=function(e,n,s,r){console.log(L),L({pathname:"/users",search:s||r||e?"?"+(e?"pageNumber=".concat(e).concat(s||r?"&":""):"")+(s?"term=".concat(s).concat(r?"&":""):"")+(!0===r?"friend=".concat(r):""):""})};return(0,r.useEffect)((function(){var e=R.search.substring(1).split("&").reduce((function(e,n){var s=n.split("="),r=(0,t.Z)(s,2),a=r[0],c=r[1];return console.log(e),e[a]=c?decodeURIComponent(c.replace(/\+/g,"")):"",e}),{}),n="true"===e.friend||void 0;console.log(n),G==+e.pageNumber&&x==(e.term?e.term:"")&&C==n||P((0,a.IV)(+e.pageNumber,v,e.term||"",n))}),[R.search,C]),(0,r.useEffect)((function(){L({pathname:"/users",search:x||C||G?"?"+(G?"pageNumber=".concat(G).concat(x||C?"&":""):"")+(x?"term=".concat(x).concat(C?"&":""):"")+(!0===C?"friend=".concat(C):""):""}),console.log(R,L)}),[]),(0,S.jsxs)("div",{className:c,children:[(0,S.jsx)(U,{onPageChange:V}),(0,S.jsx)(Z,{onUsersChange:V}),g?(0,S.jsx)(w.Z,{}):(0,S.jsx)("div",{children:n.map((function(e){return(0,S.jsxs)("div",{className:u,children:[(0,S.jsx)("div",{className:i,children:(0,S.jsx)(j.OL,{to:"/profile/"+e.id,children:(0,S.jsx)("img",{src:null!==e.photos.small?e.photos.small:"https://shapka-youtube.ru/wp-content/uploads/2021/02/avatarka-dlya-skaypa-dlya-parney.jpg",alt:"\u043a\u0430\u0440\u0442\u0438\u043d\u043a\u0430"})})}),(0,S.jsx)("div",{className:l,children:p?(0,S.jsx)("button",{className:d,disabled:s.includes(e.id),onClick:function(){return n=e.id,s=e.followed,void P((0,a.uq)(n,s));var n,s},children:e.followed?"Unfollow":"Follow"}):(0,S.jsx)(j.OL,{className:_,to:"../login",children:"Register to subscribe"})}),(0,S.jsx)("div",{className:h,children:p&&(0,S.jsx)(j.OL,{to:"/dialogs/".concat(e.id),children:(0,S.jsx)("button",{className:d,onClick:function(){var n;n=e.id,P((0,B.yZ)(n))},children:"Message"})})}),(0,S.jsxs)("div",{className:o,children:[(0,S.jsx)("div",{className:f,children:e.name}),(0,S.jsx)("div",{className:m,children:e.status})]})]},e.id)}))})]})},V=function(e){var n=(0,y.TL)(),s=(0,y.CG)((function(e){return e.users.pageSize})),t=(0,y.CG)((function(e){return e.users.currentPage}));return(0,r.useEffect)((function(){n((0,a.Uk)(t,s))}),[]),(0,S.jsx)(S.Fragment,{children:(0,S.jsx)(R,{})})}}}]);
//# sourceMappingURL=92.0307f691.chunk.js.map